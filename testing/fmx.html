<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" charset="utf-8" async src="//ssl.p.jwpcdn.com/player/v/8.22.0/jwpsrv.js"></script>
    <title>GET ANTV LIVE x FMX</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <script type="text/javascript" src="//ssl.p.jwpcdn.com/player/v/8.22.0/jwplayer.js"></script>
    <script type="text/javascript">jwplayer.key="XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo"</script>
    <script charset="utf-8" src="//ssl.p.jwpcdn.com/player/v/8.22.0/jwplayer.core.controls.js"></script>
    <script charset="utf-8" src="//ssl.p.jwpcdn.com/player/v/8.22.0/provider.hlsjs.js"></script>
    <style>
        #player {
            position: absolute;
            width: 100% !important;
            height: 100% !important;
        }
        .player-poster[data-poster] {
            background-size: cover;
        }
        body {
            margin: 0;
            padding: 0;
        }
        div a img {
            visibility: hidden;
        }
        body::before {
            position: absolute;
            top: 5px;
            right: 5px;
            z-index: 10;
            content: '';
            height: 70px;
            width: 140px;
            background: url('') no-repeat;
            background-size: 140px auto, auto;
            opacity: 0.4;
        }
    </style>
    <script type="text/javascript" src="/tools.js"></script>
    <script charset="utf-8" src="//ssl.p.jwpcdn.com/player/v/8.22.0/provider.cast.js"></script>
    <script charset="utf-8" src="//ssl.p.jwpcdn.com/player/v/8.22.0/polyfills.webvtt.js"></script>
</head>
<body style="margin:0; padding:0;">
<div id="player"></div>

<script type="text/javascript">
    // Function to get URL parameter value
    function getData(param) {
        param = param.replace(/[\[]/, "[").replace(/[\]]/, "]");
        const result = new RegExp("[?&]" + param + "=([^&#]*)").exec(location.search);
        return result === null ? "" : decodeURIComponent(result[1].replace(/\+/g, " "));
    }

    // Fetch video URL with custom User-Agent header and setup JW Player
    const url = atob(getData("get"));  // Decode the URL from the "get" parameter

    fetch(url, {
        headers: {
            'User-Agent': 'ExoPlayerDemo/2.15.1 (Linux; Android 10)'
        }
    })
    .then(response => {
        if (!response.ok) throw new Error('Network response was not ok');
        return response.blob();
    })
    .then(blob => {
        const videoUrl = URL.createObjectURL(blob);  // Create a temporary URL for JW Player to use

        // Setup JW Player with the fetched video URL
        const playerInstance = jwplayer("player");
        playerInstance.setup({
            title: "BIASAKAN KLIK IKLAN SEBELUM & SESUDAH NONTON",
            description: "PENGGUNA YANG JARANG KLIK IKLAN AKAN DIBLOKIR OTOMATIS OLEH SISTEM",
            file: videoUrl,  // Use the blob URL here
            type: "dash",
            width: "100%",
            height: "100%",
            aspectratio: "16:9",
            autostart: false,
            cast: {}
        });

        // Set language and quality when the player starts playing
        playerInstance.on("play", function() {
            playerInstance.setCurrentAudioTrack(getData("lang"));
            playerInstance.setCurrentQuality(3);
        });
    })
    .catch(error => {
        console.error('Error fetching video:', error);
    });

    // Function to toggle fullscreen
    function toggleFullscreen() {
        let elem = document.querySelector("iframe");
        if (!document.fullscreenElement) {
            elem.requestFullscreen().catch((err) => {
                alert(`Error attempting to enable fullscreen mode: ${err.message} (${err.name})`);
            });
        } else {
            document.exitFullscreen();
        }
    }
</script>

</body>
</html>
